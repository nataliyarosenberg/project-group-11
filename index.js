import{i as d}from"./assets/vendor-I1I71QQ2.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();const m="data:image/svg+xml,%3csvg%20aria-hidden='true'%20style='position:%20absolute;%20width:%200;%20height:%200;%20overflow:%20hidden;'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3csymbol%20id='icon-x-icon'%20viewBox='0%200%2032%2032'%3e%3cpath%20d='M21.589%208.459l-5.657%205.656-5.656-5.656-1.885%201.885%205.656%205.656-5.656%205.656%201.885%201.885%205.656-5.656%205.657%205.656%201.885-1.885-5.656-5.656%205.656-5.656-1.885-1.885z'%3e%3c/path%3e%3c/symbol%3e%3c/defs%3e%3c/svg%3e";let l=null,u=null;async function f(){try{if(!document.getElementById("svg-sprite")){const c=await(await fetch(m)).text(),i=document.createElement("div");i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.id="svg-sprite",i.innerHTML=c,document.body.prepend(i)}const n=await(await fetch("./partials/order-modal.html")).text();document.body.insertAdjacentHTML("beforeend",n);const r=document.querySelector(".backdrop"),s=document.querySelector(".modal-button-close"),e=document.querySelector(".modal-form");r&&(r.addEventListener("click",o=>{o.target===r&&a()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&r.classList.contains("is-open")&&a()})),s&&s.addEventListener("click",a),e&&e.addEventListener("submit",g)}catch(t){console.error("Помилка завантаження модалки:",t)}}function a(){const t=document.querySelector(".backdrop");t&&(t.classList.remove("is-open"),document.body.style.overflow="",p())}function p(){const t=document.querySelector(".modal-form");t&&t.reset()}async function g(t){t.preventDefault();const n=t.target,r=new FormData(n),s={name:r.get("user-name"),phone:r.get("user-phone"),comment:r.get("user-comment"),furnitureId:l,marker:u};try{const e=await fetch("/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok)d.success({title:"Успіх",message:"Ваше замовлення успішно відправлено!",position:"topRight"}),a();else{const o=e.headers.get("content-type");if(o&&o.indexOf("application/json")!==-1){const c=await e.json();throw new Error(c.message||"Помилка сервера")}else{const c=await e.text();throw new Error(c||"Помилка сервера")}}}catch(e){d.error({title:"Помилка",message:e.message||"Не вдалося відправити форму",position:"topRight"})}}function y(t=!0,n=null,r=null){const s=document.querySelector(".backdrop");s&&(s.classList.toggle("is-open",t),document.body.style.overflow=t?"hidden":"",t&&(l=n,u=r))}document.addEventListener("DOMContentLoaded",()=>{f(),document.addEventListener("click",t=>{if(t.target.closest("[data-modal-open]")){const n=t.target.closest("[data-modal-open]").dataset.id,r=t.target.closest("[data-modal-open]").dataset.marker;y(!0,n,r)}})});
//# sourceMappingURL=index.js.map
