import{a as g,i as u,A as M}from"./assets/vendor-BOf7_0lP.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const y=document.querySelector(".loader-more"),h=document.querySelector(".loader-more-container"),w=document.querySelector(".furniture-list"),v=document.querySelector(".load-more-btn");let a=1,l=null;const m=8;async function x(){try{const o=(await g("https://furniture-store.b.goit.study/api/categories")).data;o.unshift({_id:"0",name:"Всі товари"}),document.querySelectorAll(".category-card").forEach((s,e)=>{const r=o[e];if(!r)return;s.dataset.id=r._id;const c=s.querySelector(".category-title");c&&(c.textContent=r.name)})}catch{u.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}}async function f(t=1,o){try{q(),p();let n=`https://furniture-store.b.goit.study/api/furnitures?limit=${m}&page=${t}`;o&&o!=="0"&&(n+=`&category=${o}`);const e=(await g(n)).data;k(e),l===null&&(l=Math.ceil(e.totalItems/m)),t>=l?p():P()}catch{u.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}finally{O()}}function k(t){const o=t.furnitures;window.allFurnitures=o;const n=o.map(s=>{const{_id:e,name:r,description:c,price:i,images:S}=s;return`
    <li class="furniture-card" id="${e}"> 
  <img src="${S[0]}" alt="${c}" class="furniture-image" />
      <p class="furniture-name">${r}</p>
      <div class="color-wrap">
        <span class="grey-color"></span>
        <span class="beige-color"></span>
        <span class="black-color"></span>
      </div>
      <p class="furniture-price">${i} грн</p>
  <button class="details-btn" type="button">Детальніше</button>
</li>`}).join("");w.insertAdjacentHTML("beforeend",n)}async function C(t){const o=t.target.closest(".category-card");if(!o)return;document.querySelectorAll(".category-card.active").forEach(s=>s.classList.remove("active")),o.classList.add("active");const n=o.dataset.id;T(),a=1,n==="0"?(l=null,f(a)):(l=null,f(a,n))}function E(){a+=1,f(a)}function q(){y.classList.remove("hidden"),h.style.display="flex"}function O(){y.classList.add("hidden"),h.style.display="none"}function P(){v.classList.remove("hidden")}function p(){v.classList.add("hidden")}function T(){w.innerHTML=""}const A=document.querySelector(".categories-list"),$=document.querySelector(".load-more-btn");$.addEventListener("click",E);A.addEventListener("click",C);x();f(a);const j="data:image/svg+xml,%3csvg%20aria-hidden='true'%20style='position:%20absolute;%20width:%200;%20height:%200;%20overflow:%20hidden;'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3csymbol%20id='icon-x-icon'%20viewBox='0%200%2032%2032'%3e%3cpath%20d='M21.589%208.459l-5.657%205.656-5.656-5.656-1.885%201.885%205.656%205.656-5.656%205.656%201.885%201.885%205.656-5.656%205.657%205.656%201.885-1.885-5.656-5.656%205.656-5.656-1.885-1.885z'%3e%3c/path%3e%3c/symbol%3e%3c/defs%3e%3c/svg%3e";let b=null,L=null;async function B(){try{if(!document.getElementById("svg-sprite")){const c=await(await fetch(j)).text(),i=document.createElement("div");i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.id="svg-sprite",i.innerHTML=c,document.body.prepend(i)}const o=await(await fetch("./partials/order-modal.html")).text();document.body.insertAdjacentHTML("beforeend",o);const n=document.querySelector(".backdrop"),s=document.querySelector(".modal-button-close"),e=document.querySelector(".modal-form");n&&(n.addEventListener("click",r=>{r.target===n&&d()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&n.classList.contains("is-open")&&d()})),s&&s.addEventListener("click",d),e&&e.addEventListener("submit",I)}catch(t){console.error("Помилка завантаження модалки:",t)}}function d(){const t=document.querySelector(".backdrop");t&&(t.classList.remove("is-open"),document.body.style.overflow="",D())}function D(){const t=document.querySelector(".modal-form");t&&t.reset()}async function I(t){t.preventDefault();const o=t.target,n=new FormData(o),s={name:n.get("user-name"),phone:n.get("user-phone"),comment:n.get("user-comment"),furnitureId:b,marker:L};try{const e=await fetch("/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok)u.success({title:"Успіх",message:"Ваше замовлення успішно відправлено!",position:"topRight"}),d();else{const r=e.headers.get("content-type");if(r&&r.indexOf("application/json")!==-1){const c=await e.json();throw new Error(c.message||"Помилка сервера")}else{const c=await e.text();throw new Error(c||"Помилка сервера")}}}catch(e){u.error({title:"Помилка",message:e.message||"Не вдалося відправити форму",position:"topRight"})}}function F(t=!0,o=null,n=null){const s=document.querySelector(".backdrop");s&&(s.classList.toggle("is-open",t),document.body.style.overflow=t?"hidden":"",t&&(b=o,L=n))}function _(){document.addEventListener("DOMContentLoaded",()=>{new M(".accordion",{duration:300,showMultiple:!1}).open(0)})}document.addEventListener("DOMContentLoaded",()=>{B(),document.addEventListener("click",t=>{if(t.target.closest("[data-modal-open]")){const o=t.target.closest("[data-modal-open]").dataset.id,n=t.target.closest("[data-modal-open]").dataset.marker;F(!0,o,n)}})});_();
//# sourceMappingURL=index.js.map
