import{a as h,i as u,A as C}from"./assets/vendor-BOf7_0lP.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const p=document.querySelector("[data-menu]"),v=document.querySelector("[data-menu-open]"),O=document.querySelector("[data-menu-close]"),P=document.querySelectorAll(".mobile-nav-list a, .mobile-btn");function A(){p.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",w),document.addEventListener("click",L)}function f(){p.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",w),document.removeEventListener("click",L)}function w(e){e.key==="Escape"&&f()}function L(e){!p.contains(e.target)&&!v.contains(e.target)&&f()}v.addEventListener("click",A);O.addEventListener("click",f);P.forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const n=e.getAttribute("href"),s=document.querySelector(n);s&&(f(),s.scrollIntoView({behavior:"smooth"}))})});const b=document.querySelector(".loader-more"),E=document.querySelector(".loader-more-container"),k=document.querySelector(".furniture-list"),S=document.querySelector(".load-more-btn");let a=1,d=null;const y=8;async function T(){try{const o=(await h("https://furniture-store.b.goit.study/api/categories")).data;o.unshift({_id:"0",name:"Всі товари"}),document.querySelectorAll(".category-card").forEach((s,t)=>{const r=o[t];if(!r)return;s.dataset.id=r._id;const c=s.querySelector(".category-title");c&&(c.textContent=r.name)})}catch{u.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}}async function m(e=1,o){try{$(),g();let n=`https://furniture-store.b.goit.study/api/furnitures?limit=${y}&page=${e}`;o&&o!=="0"&&(n+=`&category=${o}`);const t=(await h(n)).data;B(t),d===null&&(d=Math.ceil(t.totalItems/y)),e>=d?g():F()}catch{u.show({message:"Sorry, something went wrong. Please try again!",position:"topRight",messageColor:"#fff",titleColor:"#fff",color:"#ef4040",iconUrl:"../images/our-furniture/bi_x-octagon-2.svg",maxWidth:432})}finally{j()}}function B(e){const o=e.furnitures;window.allFurnitures=o;const n=o.map(s=>{const{_id:t,name:r,description:c,price:i,images:x}=s;return`
    <li class="furniture-card" id="${t}"> 
  <img src="${x[0]}" alt="${c}" class="furniture-image" />
      <p class="furniture-name">${r}</p>
      <div class="color-wrap">
        <span class="grey-color"></span>
        <span class="beige-color"></span>
        <span class="black-color"></span>
      </div>
      <p class="furniture-price">${i} грн</p>
  <button class="details-btn" type="button">Детальніше</button>
</li>`}).join("");k.insertAdjacentHTML("beforeend",n)}async function D(e){const o=e.target.closest(".category-card");if(!o)return;document.querySelectorAll(".category-card.active").forEach(s=>s.classList.remove("active")),o.classList.add("active");const n=o.dataset.id;_(),a=1,n==="0"?(d=null,m(a)):(d=null,m(a,n))}function I(){a+=1,m(a)}function $(){b.classList.remove("hidden"),E.style.display="flex"}function j(){b.classList.add("hidden"),E.style.display="none"}function F(){S.classList.remove("hidden")}function g(){S.classList.add("hidden")}function _(){k.innerHTML=""}const H=document.querySelector(".categories-list"),N=document.querySelector(".load-more-btn");N.addEventListener("click",I);H.addEventListener("click",D);T();m(a);const R="data:image/svg+xml,%3csvg%20aria-hidden='true'%20style='position:%20absolute;%20width:%200;%20height:%200;%20overflow:%20hidden;'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3csymbol%20id='icon-x-icon'%20viewBox='0%200%2032%2032'%3e%3cpath%20d='M21.589%208.459l-5.657%205.656-5.656-5.656-1.885%201.885%205.656%205.656-5.656%205.656%201.885%201.885%205.656-5.656%205.657%205.656%201.885-1.885-5.656-5.656%205.656-5.656-1.885-1.885z'%3e%3c/path%3e%3c/symbol%3e%3c/defs%3e%3c/svg%3e";let M=null,q=null;async function z(){try{if(!document.getElementById("svg-sprite")){const c=await(await fetch(R)).text(),i=document.createElement("div");i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.id="svg-sprite",i.innerHTML=c,document.body.prepend(i)}const o=await(await fetch("./partials/order-modal.html")).text();document.body.insertAdjacentHTML("beforeend",o);const n=document.querySelector(".backdrop"),s=document.querySelector(".modal-button-close"),t=document.querySelector(".modal-form");n&&(n.addEventListener("click",r=>{r.target===n&&l()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&n.classList.contains("is-open")&&l()})),s&&s.addEventListener("click",l),t&&t.addEventListener("submit",V)}catch(e){console.error("Помилка завантаження модалки:",e)}}function l(){const e=document.querySelector(".backdrop");e&&(e.classList.remove("is-open"),document.body.style.overflow="",U())}function U(){const e=document.querySelector(".modal-form");e&&e.reset()}async function V(e){e.preventDefault();const o=e.target,n=new FormData(o),s={name:n.get("user-name"),phone:n.get("user-phone"),comment:n.get("user-comment"),furnitureId:M,marker:q};try{const t=await fetch("/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok)u.success({title:"Успіх",message:"Ваше замовлення успішно відправлено!",position:"topRight"}),l();else{const r=t.headers.get("content-type");if(r&&r.indexOf("application/json")!==-1){const c=await t.json();throw new Error(c.message||"Помилка сервера")}else{const c=await t.text();throw new Error(c||"Помилка сервера")}}}catch(t){u.error({title:"Помилка",message:t.message||"Не вдалося відправити форму",position:"topRight"})}}function W(e=!0,o=null,n=null){const s=document.querySelector(".backdrop");s&&(s.classList.toggle("is-open",e),document.body.style.overflow=e?"hidden":"",e&&(M=o,q=n))}function J(){document.addEventListener("DOMContentLoaded",()=>{new C(".accordion",{duration:300,showMultiple:!1}).open(0)})}document.addEventListener("DOMContentLoaded",()=>{z(),document.addEventListener("click",e=>{if(e.target.closest("[data-modal-open]")){const o=e.target.closest("[data-modal-open]").dataset.id,n=e.target.closest("[data-modal-open]").dataset.marker;W(!0,o,n)}})});J();
//# sourceMappingURL=index.js.map
