{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/our-furniture.js","../src/img/icons.svg","../src/js/order-modal.js","../src/js/faq.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loaderMore = document.querySelector(\".loader-more\")\nconst loaderMoreContainer = document.querySelector(\".loader-more-container\");\nconst furnituresListContainer = document.querySelector(\".furniture-list\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nexport let currentPage = 1;\nlet totalPages = null;\nconst limit = 8;\n\nexport async function fetchCategories() {\n    try {\n        const response = await axios('https://furniture-store.b.goit.study/api/categories');\n        const categories = response.data;\n\n      categories.unshift({ _id: \"0\", name: \"Всі товари\" })\n      const categoryCards = document.querySelectorAll('.category-card');\n\n    categoryCards.forEach((card, index) => {\n      const category = categories[index];\n      if (!category) return;\n\n      card.dataset.id = category._id;\n\n      const title = card.querySelector('.category-title');\n      if (title) {\n        title.textContent = category.name;\n      }\n    });} catch (error) {\n        iziToast.show({\n      message: 'Sorry, something went wrong. Please try again!',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: '../images/our-furniture/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n    }\n}\n\nexport async function fetchProducts(page = 1, id) {\n  try {\n    showLoaderMore();\n    hideLoadMoreButton();\n\n    let url = `https://furniture-store.b.goit.study/api/furnitures?limit=${limit}&page=${page}`;\n    \n    if (id && id !== \"0\") {\n      url += `&category=${id}`;\n    }\n\n    const response = await axios(url);\n    const productsObject = response.data;\n    \n    renderProducts(productsObject);\n\n    if (totalPages === null) {\n      totalPages = Math.ceil(productsObject.totalItems / limit);\n    }\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton(); \n    }\n  } catch (error) {\n    iziToast.show({\n      message: 'Sorry, something went wrong. Please try again!',\n      position: 'topRight',\n      messageColor: '#fff',\n      titleColor: '#fff',\n      color: '#ef4040',\n      iconUrl: '../images/our-furniture/bi_x-octagon-2.svg',\n      maxWidth: 432\n    });\n  } finally {\n    hideLoaderMore();\n  }\n}\n\nexport function renderProducts(obj) {\n    const furnitures = obj.furnitures;\n    window.allFurnitures = furnitures;\n  const markup = furnitures.map(product => {\n    const { _id, name, description, price, images } = product;\n    return `\n    <li class=\"furniture-card\" id=\"${_id}\"> \n  <img src=\"${images[0]}\" alt=\"${description}\" class=\"furniture-image\" />\n      <p class=\"furniture-name\">${name}</p>\n      <div class=\"color-wrap\">\n        <span class=\"grey-color\"></span>\n        <span class=\"beige-color\"></span>\n        <span class=\"black-color\"></span>\n      </div>\n      <p class=\"furniture-price\">${price} грн</p>\n  <button class=\"details-btn\" type=\"button\">Детальніше</button>\n</li>`\n  }).join(\"\");\n\n  furnituresListContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nexport async function handlerClickOnCategory(event){\n    const currentCategory = event.target.closest(\".category-card\")\n    if (!currentCategory) {\n        return\n    }\n\n    document.querySelectorAll(\".category-card.active\").forEach(card =>\n    card.classList.remove(\"active\")\n  );\n\n    currentCategory.classList.add(\"active\");\n    \n    const currentCategoryID = currentCategory.dataset.id;\n    \n    clearProducts();\n    currentPage = 1; \n\n  if (currentCategoryID === \"0\") { \n    totalPages = null; \n    fetchProducts(currentPage);\n  } else {\n    totalPages = null; \n    fetchProducts(currentPage, currentCategoryID);\n  }\n}\n\n\n\n\n export function handleLoadMore() {\n  currentPage += 1;\n  fetchProducts(currentPage);\n }\n\n export function showLoaderMore() {\n  loaderMore.classList.remove(\"hidden\");\n  loaderMoreContainer.style.display = 'flex';\n\n}\n\n export function hideLoaderMore() {\n  loaderMore.classList.add(\"hidden\");\n  loaderMoreContainer.style.display = 'none';\n }\n\n \nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n  \n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}\n\nfunction clearProducts() {\n    furnituresListContainer.innerHTML = \"\";\n}","import axios from 'axios';\nimport {fetchCategories, fetchProducts, showLoaderMore, hideLoaderMore, handleLoadMore, renderProducts, currentPage, handlerClickOnCategory } from '../js/api.js';\n\nconst categoriesList = document.querySelector(\".categories-list\");\nconst moreBtn = document.querySelector(\".load-more-btn\");\nmoreBtn.addEventListener(\"click\", handleLoadMore);\ncategoriesList.addEventListener(\"click\", handlerClickOnCategory);\n\nfetchCategories();\nfetchProducts(currentPage);\n\n","export default \"data:image/svg+xml,%3csvg%20aria-hidden='true'%20style='position:%20absolute;%20width:%200;%20height:%200;%20overflow:%20hidden;'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3csymbol%20id='icon-x-icon'%20viewBox='0%200%2032%2032'%3e%3cpath%20d='M21.589%208.459l-5.657%205.656-5.656-5.656-1.885%201.885%205.656%205.656-5.656%205.656%201.885%201.885%205.656-5.656%205.657%205.656%201.885-1.885-5.656-5.656%205.656-5.656-1.885-1.885z'%3e%3c/path%3e%3c/symbol%3e%3c/defs%3e%3c/svg%3e\"","import iconSprite from '../img/icons.svg';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet furnitureId = null;\nlet markerValue = null;\n\n// Функція для завантаження HTML модалки\nexport async function loadOrderModal() {\n  try {\n    // Додаємо SVG спрайт\n    if (!document.getElementById('svg-sprite')) {\n      const response = await fetch(iconSprite);\n      const svgText = await response.text();\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.width = '0';\n      div.style.height = '0';\n      div.style.overflow = 'hidden';\n      div.id = 'svg-sprite';\n      div.innerHTML = svgText;\n      document.body.prepend(div);\n    }\n\n    const response = await fetch('./partials/order-modal.html');\n    const html = await response.text();\n    document.body.insertAdjacentHTML('beforeend', html);\n\n    const backdrop = document.querySelector('.backdrop');\n    const closeBtn = document.querySelector('.modal-button-close');\n    const form = document.querySelector('.modal-form');\n\n    if (backdrop) {\n      // Закриття по кліку на бекдроп\n      backdrop.addEventListener('click', e => {\n        if (e.target === backdrop) {\n          closeModal();\n        }\n      });\n\n      // Закриття по ESC\n      document.addEventListener('keydown', e => {\n        if (e.key === 'Escape' && backdrop.classList.contains('is-open')) {\n          closeModal();\n        }\n      });\n    }\n\n    if (closeBtn) {\n      closeBtn.addEventListener('click', closeModal);\n    }\n\n    if (form) {\n      form.addEventListener('submit', handleFormSubmit);\n    }\n  } catch (error) {\n    console.error('Помилка завантаження модалки:', error);\n  }\n}\n\nfunction closeModal() {\n  const backdrop = document.querySelector('.backdrop');\n  if (backdrop) {\n    backdrop.classList.remove('is-open');\n    document.body.style.overflow = '';\n    resetForm();\n  }\n}\n\nfunction resetForm() {\n  const form = document.querySelector('.modal-form');\n  if (form) {\n    form.reset();\n  }\n}\n\nasync function handleFormSubmit(e) {\n  e.preventDefault();\n\n  const form = e.target;\n  const formData = new FormData(form);\n  const data = {\n    name: formData.get('user-name'),\n    phone: formData.get('user-phone'),\n    comment: formData.get('user-comment'),\n    furnitureId,\n    marker: markerValue,\n  };\n\n  try {\n    const response = await fetch('/orders', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n\n    if (response.ok) {\n      iziToast.success({\n        title: 'Успіх',\n        message: 'Ваше замовлення успішно відправлено!',\n        position: 'topRight',\n      });\n      closeModal();\n    } else {\n      // Safely handle potential non-JSON error responses\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.indexOf('application/json') !== -1) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Помилка сервера');\n      } else {\n        const errorText = await response.text();\n        throw new Error(errorText || 'Помилка сервера');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Помилка',\n      message: error.message || 'Не вдалося відправити форму',\n      position: 'topRight',\n    });\n  }\n}\n\nexport function toggleModal(open = true, id = null, marker = null) {\n  const backdrop = document.querySelector('.backdrop');\n  if (backdrop) {\n    backdrop.classList.toggle('is-open', open);\n    document.body.style.overflow = open ? 'hidden' : '';\n\n    if (open) {\n      furnitureId = id;\n      markerValue = marker;\n    }\n  }\n}\n\n//     // Додаємо обробники подій\n//     const backdrop = document.querySelector('.backdrop');\n//     if (backdrop) {\n//       backdrop.addEventListener('click', () => {\n//         backdrop.classList.remove('is-open');\n//       });\n//     }\n//   } catch (error) {\n//     console.error('Помилка завантаження модалки:', error);\n//   }\n// }\n\n// // Функція для відкриття/закриття модалки\n// export function toggleModal(open = true) {\n//   const backdrop = document.querySelector('.backdrop');\n//   if (backdrop) {\n//     backdrop.classList.toggle('is-open', open);\n//   }\n// }\n","import Accordion from \"accordion-js\";\nimport \"accordion-js/dist/accordion.min.css\";\nimport \"../css/faq.css\"\nexport function initAccordion() {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    const accordion = new Accordion(\".accordion\", {\n      duration: 300,\n      showMultiple: false,\n    });\n    accordion.open(0);\n  });\n}","\nimport { loadOrderModal, toggleModal } from './js/order-modal.js';\n\n// Завантажуємо модалку при завантаженні сторінки\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadOrderModal();\n\n  //   //  відкрити модалку по кліку на кнопку (якщо є)\n  //   const openModalBtn = document.querySelector('[data-modal-open]');\n  //   if (openModalBtn) {\n  //     openModalBtn.addEventListener('click', () => toggleModal(true));\n  //   }\n  // });\n\n  // Приклад відкриття модалки з даними\n  document.addEventListener('click', e => {\n    if (e.target.closest('[data-modal-open]')) {\n      const furnitureId = e.target.closest('[data-modal-open]').dataset.id;\n      const marker = e.target.closest('[data-modal-open]').dataset.marker;\n      toggleModal(true, furnitureId, marker);\n    }\n  });\n});\n\n\nimport { initAccordion } from './js/faq.js';\ninitAccordion();\n\n"],"names":["loaderMore","loaderMoreContainer","furnituresListContainer","loadMoreBtn","currentPage","totalPages","limit","fetchCategories","categories","axios","card","index","category","title","iziToast","fetchProducts","page","id","showLoaderMore","hideLoadMoreButton","url","productsObject","renderProducts","showLoadMoreButton","hideLoaderMore","obj","furnitures","markup","product","_id","name","description","price","images","handlerClickOnCategory","event","currentCategory","currentCategoryID","clearProducts","handleLoadMore","categoriesList","moreBtn","iconSprite","furnitureId","markerValue","loadOrderModal","svgText","div","html","backdrop","closeBtn","form","e","closeModal","handleFormSubmit","error","resetForm","formData","data","response","contentType","errorData","errorText","toggleModal","open","marker","initAccordion","Accordion"],"mappings":"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"}